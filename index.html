<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>‡∏û‡∏£‡∏û‡∏¥‡∏®‡∏≤‡∏• ‡∏Ñ‡πâ‡∏≤‡∏™‡πà‡∏á | ‡∏£‡∏∞‡∏ö‡∏ö‡∏ö‡∏±‡∏ç‡∏ä‡∏µ</title>
  <style>
    body { margin:0; font-family: Arial; background:#f1f5f9; }
    .center { max-width:400px; margin:80px auto; background:#fff; padding:20px; border-radius:8px; }
    input, button { width:100%; padding:10px; margin:6px 0; }
    button { background:#0f172a; color:#fff; border:none; }
    .layout { display:flex; min-height:100vh; }
    .sidebar { width:220px; background:#0f172a; color:#fff; padding:15px; }
    .sidebar button { width:100%; margin:5px 0; padding:10px; background:#1e293b; color:#fff; border:none; text-align:left; }
    .content { flex:1; padding:20px; }
    .card { background:#fff; padding:15px; border-radius:8px; }
    .hidden { display:none; }
    @media(max-width:768px){
      .layout{ flex-direction:column; }
      .sidebar{ width:100%; }
    }
  </style>
</head>
<body>

<!-- üîê LOGIN -->
<div id="login" class="center hidden">
  <h2>‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏ö‡∏±‡∏ç‡∏ä‡∏µ</h2>
  <input id="user" placeholder="Username">
  <input id="pass" type="password" placeholder="Password">
  <button onclick="login()">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</button>
</div>

<!-- üìä APP -->
<div id="app" class="layout hidden">
  <div class="sidebar">
    <h3>‡∏û‡∏£‡∏û‡∏¥‡∏®‡∏≤‡∏• ‡∏Ñ‡πâ‡∏≤‡∏™‡πà‡∏á</h3>
    <button onclick="show('bill')">üìÑ ‡πÉ‡∏ö‡∏ß‡∏≤‡∏á‡∏ö‡∏¥‡∏•</button>
    <button onclick="show('expense')">üí∏ ‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢</button>
    <button onclick="show('income')">üí∞ ‡∏£‡∏≤‡∏¢‡∏£‡∏±‡∏ö</button>
    <button onclick="logout()">üö™ ‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö</button>
  </div>

  <div class="content">
    <div id="bill" class="card">
      <h2>‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÉ‡∏ö‡∏ß‡∏≤‡∏á‡∏ö‡∏¥‡∏•</h2>
      <input placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó">
      <input type="number" placeholder="‡∏¢‡∏≠‡∏î‡πÄ‡∏á‡∏¥‡∏ô">
      <input type="date">
      <input type="time">
      <button>‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</button>
    </div>

    <div id="expense" class="card hidden">
      <h2>‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢</h2>
      <input placeholder="‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£">
      <input type="number" placeholder="‡∏¢‡∏≠‡∏î‡πÄ‡∏á‡∏¥‡∏ô">
      <button>‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</button>
    </div>

    <div id="income" class="card hidden">
      <h2>‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏£‡∏≤‡∏¢‡∏£‡∏±‡∏ö</h2>
      <input placeholder="‡∏ó‡∏µ‡πà‡∏°‡∏≤">
      <input type="number" placeholder="‡∏¢‡∏≠‡∏î‡πÄ‡∏á‡∏¥‡∏ô">
      <button>‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</button>
    </div>
  </div>
</div>

<script>
const BACKEND = 'https://phornpisarn-backend-live.onrender.com';

function checkLogin(){
  const token = localStorage.getItem('token');
  document.getElementById('login').classList.toggle('hidden', !!token);
  document.getElementById('app').classList.toggle('hidden', !token);
}
checkLogin();

function login(){
  fetch(BACKEND + '/login',{
    method:'POST',
    headers:{'Content-Type':'application/json'},
    body:JSON.stringify({
      username:user.value,
      password:pass.value
    })
  })
  .then(r=>{ if(!r.ok) throw 0; return r.json(); })
  .then(d=>{
    localStorage.setItem('token', d.token);
    checkLogin();
  })
  .catch(()=>alert('‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏´‡∏£‡∏∑‡∏≠‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á'));
}

function logout(){
  localStorage.removeItem('token');
  checkLogin();
}

function show(id){
  document.querySelectorAll('.card').forEach(c=>c.classList.add('hidden'));
  document.getElementById(id).classList.remove('hidden');
}
</script>

</body>
</html>
